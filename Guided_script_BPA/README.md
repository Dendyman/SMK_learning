# Шаг 0 «Вход в SAP Build лобби»

Откройте <https://samruktest-gdpazdel.eu10.build.cloud.sap/lobby>\
Аутентифицируйтесь через <https://a8nbw3y7x.accounts.ondemand.com/>
(если инструмент запросит аутентификацию)

![](./media/image1.png)

Введите ваши логин и пароль пользователя

![](./media/image2.png)

# Шаг 1 «открытие проекта процесса в SAP Build Lobby»:

Найдите проект вашего приложения по имени
persona_request_process_ws_user?\
![](./media/image3.png)

Откройте проект, кликнув по имени проекта. Откроется экран как ниже:\
\
![](./media/image4.png)

# Шаг 2 «внесение изменений в логику исполнения процесса согласования»:

Пройдите в редактор процесса, кликнув на имени процесса:

![](./media/image5.png)

Откроется редактор:

![](./media/image6.png)

В данном процессе добавим еще одно условие автоматического отклонения
заявки по номеру ИИН потенциального посетителя, который находится в
блок-листе.

В качестве ИИН номера из блок-листа возьмем значение «808080909090»

Добавим условие проверки ИИН в процесс, кликнув на плюс перед
существующим условием и выбрав в меню Controls -\> Condition:

![](./media/image7.png)

Поменяем имя условия на **IIN block**, введя текст в поле **Step Name**,
и откроем редактор условий:

![](./media/image8.png)

Введем проверяемое значение, выбрав значение поля из формы ввода как на
картинке:

![](./media/image9.png)

Введем значение из блок-листа и применим, нажав Apply:

![](./media/image10.png)

Правой кнопкой мыши на свободном участке канвы вызовем контекстное меню
и добавим новую форму уведомления:

![](./media/image11.png)

Зададим форме название «**IIN_block_notification**»:

![](./media/image12.png)

И нажмем **create**.

Встроим новый блок уведомления как показано на рисунке:

![](./media/image13.png)

Далее откроем редактор формы уведомления для данного блока, нажав на три
вертикальные точки у блока и выбрав **Open Editor**:

![](./media/image14.png)

В редакторе добавим на канву след элементы из панели слева:

![](./media/image15.png)

Зададим след текст полям и выберем "Read Only" свойство для 2х текстовых
полей:

![](./media/image16.png)

И сохраните.

Закройте вкладку редактора формы и вернитесь в редактор процесса.

Выберите блок созданного уведомления. Во вкладке General свойств блока
введите значения в поле Subject (тема уведомления) и Recipients
(получатели уведомления) как на картинке ниже:

![](./media/image17.png)

Также добавьте группу получателей "**SEC_GROUP**" в поле Groups:

![](./media/image18.png)

На вкладке Inputs введите следующие значения в обязательные поля,
используя переменные из первоначальной формы:

![](./media/image19.png)

Сохраните проект, нажав кнопку SAVE.

# Шаг 3 «Деплоймент обновленного процесса»:

Нажмите кнопку RELEASE проекта:

![](./media/image20.png)

Далее Release:

![](./media/image21.png)

После успешного релиза нажмите кнопку Deploy проекта:

![](./media/image22.png)

Next:

![](./media/image23.png)

Далее выберите destination "destination_to_api_Denis" и Next:

![](./media/image24.png)

И deploy:

![](./media/image25.png)

# Шаг 4 «Тестовый запуск обновленного процесса»:

После успешного деплоймента, пройдите снова в процесс:

![](./media/image26.png)

Выберите Request_Form и скопируйте Form_Link:

![](./media/image27.png)

Запустите Form_Link в отдельном окне браузера. Откроется форма подачи
заявки на проход. Заполните ее тестовыми данными, указав в качестве ИИН
номер, который мы договорились счтитать заблокированным:

![](./media/image28.png)

Нажмите Request.

Далее пройдите на портал:
<https://samruktest-gdpazdel.workzone.cfapps.eu10.hana.ondemand.com/site#workzone-home&/home>
и зайдите в приложение My Inbox:

![](./media/image29.png)

Там вы обнаружите, что ваша заявка отклонена, так как посетитель в
блок-листе:

![](./media/image30.png)

Нажмите Submit.

Команде Security придет аналогичное уведомление:

![](./media/image31.png)
